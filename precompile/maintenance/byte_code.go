package maintenance

// EvmByteCode is the EVM bytecode of the maintenance precompile. This code is
// returned by eth_getCode and ensures the precompile address is detected as a
// smart contract by external services. note: It should NOT contain a 0x prefix
//
// WARNING! This value is used in the InitChain ABCI hook and affects the app state hash.
// DO NOT change this value on a live chain, instead, use `setPrecompileByteCode`
// provided by the `Maintenance` precompile
//
// FIXME: As we already have a live chain at the moment of adding this precompile,
//
//	we cannot add a non-empty bytecode here. This bytecode is used
//	to create an EVM account for the precompile, in the InitChainer.
//	This account is needed to perform precompile verification in block explorers.
//	However, if we put a non-empty bytecode here we would cause troubles
//	for new full nodes trying to sync from genesis. This is because
//	the genesis resolved by new nodes would contain the maintenance
//	precompile bytecode while the actual genesis accepted by the
//	chain would not. Such a difference would cause an app state hash
//	mismatch and would crash the sync for new nodes on block 1.
//	This problem must be addressed as part of on-chain upgrades.
//	See: https://linear.app/thesis-co/issue/ENG-391/figure-out-how-to-handle-updates-of-byte-code-for-precompiles
//
//nolint:all
const EvmByteCode = "608060405234801561000f575f80fd5b506004361061003f575f3560e01c8063175116dd146100435780636e56ab8f1461006a57806394e7742a1461007d575b5f80fd5b6100566100513660046101dc565b610085565b604051901515815260200160405180910390f35b610056610078366004610275565b6100fe565b61005661016e565b60405163175116dd60e01b81525f906013611edf60921b019063175116dd906100b690879087908790600401610297565b6020604051808303815f875af11580156100d2573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906100f691906102d6565b949350505050565b604051636e56ab8f60e01b815281151560048201525f906013611edf60921b0190636e56ab8f906024016020604051808303815f875af1158015610144573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061016891906102d6565b92915050565b5f6013611edf60921b016001600160a01b03166394e7742a6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156101b3573d5f803e3d5ffd5b505050506040513d601f19601f820116820180604052508101906101d791906102d6565b905090565b5f805f604084860312156101ee575f80fd5b83356001600160a01b0381168114610204575f80fd5b9250602084013567ffffffffffffffff80821115610220575f80fd5b818601915086601f830112610233575f80fd5b813581811115610241575f80fd5b876020828501011115610252575f80fd5b6020830194508093505050509250925092565b8015158114610272575f80fd5b50565b5f60208284031215610285575f80fd5b813561029081610265565b9392505050565b6001600160a01b03841681526040602082018190528101829052818360608301375f818301606090810191909152601f909201601f1916010192915050565b5f602082840312156102e6575f80fd5b81516102908161026556fea2646970667358221220607ead2ba60f3563fe2b0bf71cda4aa30b484ec8724113f9d0d149972e2e479064736f6c63430008180033"
